<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Niblit AI Dashboard</title>
<style>
body { font-family: Arial; margin:0; padding:0; }
#chatbox { border:1px solid #ccc; height:300px; overflow-y:scroll; padding:10px; background: rgba(255,255,255,0.8); }
#input { width:70%; padding:10px; }
#send { padding:10px; }
#dashboard { margin-top:20px; padding:10px; background:#eee; }
body.dynamic-bg { 
    background-image: url('background.jpg'); 
    background-size: cover;
}
</style>
</head>
<body class="dynamic-bg">
<h1>Niblit AI Dashboard</h1>
<div id="chatbox"></div>
<input type="text" id="input" placeholder="Say something..."/>
<button id="send">Send</button>

<div id="dashboard">
<h3>Dashboard</h3>
<div id="version">Version: 1.0</div>
<div id="last-evolved">Last Evolved: N/A</div>
<div id="last-learned">Last Learned: N/A</div>
</div>

<script>
const chatbox = document.getElementById("chatbox");
const input = document.getElementById("input");
const send = document.getElementById("send");

async function sendMessage(msg){
    chatbox.innerHTML += `<div><b>You:</b> ${msg}</div>`;
    const res = await fetch("/api/index.py", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({message: msg})
    });
    const data = await res.json();
    chatbox.innerHTML += `<div><b>Niblit:</b> ${data.message}</div>`;
    chatbox.scrollTop = chatbox.scrollHeight;

    // Update dashboard
    document.getElementById("version").innerText = `Version: ${data.version}`;
    document.getElementById("last-evolved").innerText = `Last Evolved: ${data.evolution}`;
    document.getElementById("last-learned").innerText = `Last Learned: ${data.evolution}`;
}

send.addEventListener("click", () => {
    const msg = input.value;
    if(!msg) return;
    input.value = "";
    sendMessage(msg);
});
</script>
</body>
</html>          
